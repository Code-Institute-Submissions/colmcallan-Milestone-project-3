{"filter":false,"title":"import.py","tooltip":"/import.py","undoManager":{"mark":2,"position":2,"stack":[[{"start":{"row":0,"column":0},"end":{"row":31,"column":14},"action":"remove","lines":["import os","import requests","from pprint import pprint","import pymongo","import mongo","","","","url = \"https://api.edamam.com/search?q={}&app_id={}&app_key={}&from=1&to=2\"","search = \"sushi\"  # Name of the recipe","api_id = \"0edc596e\"","api_key = \"2d2f813ed902380b9482bdd0ce4ec391\"","","r = requests.get(url.format(search, api_id, api_key)).json()  # Make a request","","recipe = {","        'recipe': search,","        'recipe_name': r['hits'][0]['recipe']['label'],","        'recipe_image': r['hits'][0]['recipe']['image'],","        'serving_size': int(r['hits'][0]['recipe']['yield']),","        'diet_labels': r['hits'][0]['recipe']['dietLabels'],","        'health_labels': r['hits'][0]['recipe']['healthLabels'],","        'ingredients': r['hits'][0]['recipe']['ingredientLines'],","        'ingredients_raw': r['hits'][0]['recipe']['ingredients'],","        'calories': int(r['hits'][0]['recipe']['calories']),","        'cooking_time': r['hits'][0]['recipe']['totalTime'],","        'total_nutrients': r['hits'][0]['recipe']['totalNutrients'],","        'likes': {","        }","    }","","pprint(recipe)"],"id":1},{"start":{"row":0,"column":0},"end":{"row":52,"column":27},"action":"insert","lines":["import os","import requests","from pprint import pprint","import pymongo","import mongo","","\"\"\" ENVIROMENT VARIABLES \"\"\"","MONGODB_URI = os.getenv(\"MONGO_URI\")","DBS_NAME = \"cookbook\"","COLLECTION_NAME = \"recipe\"","","","def mongo_connect(url):","    \"\"\"Function to make a connection to our DB\"\"\"","    try:","        conn = pymongo.MongoClient(url)","        print('Mongo is connected')","        return conn","    except pymongo.errors.ConnectionFailure as e:","        print('Could not connect to MongoDB: %s') % e","","conn = mongo_connect(MONGODB_URI)  # Assign our connection to a var","coll = conn[DBS_NAME][COLLECTION_NAME]  # Put it all together","","url = \"https://api.edamam.com/search?q={}&app_id={}&app_key={}&from=1&to=2\"","search = \"sushi\"  # Name of the recipe","api_id = \"0edc596e\"","api_key = \"2d2f813ed902380b9482bdd0ce4ec391\"","","r = requests.get(url.format(search, api_id, api_key)).json()  # Make a request","","recipe = {","        'recipe': search,","        'recipe_name': r['hits'][0]['recipe']['label'],","        'recipe_image': r['hits'][0]['recipe']['image'],","        'serving_size': int(r['hits'][0]['recipe']['yield']),","        'diet_labels': r['hits'][0]['recipe']['dietLabels'],","        'health_labels': r['hits'][0]['recipe']['healthLabels'],","        'ingredients': r['hits'][0]['recipe']['ingredientLines'],","        'ingredients_raw': r['hits'][0]['recipe']['ingredients'],","        'calories': int(r['hits'][0]['recipe']['calories']),","        'cooking_time': r['hits'][0]['recipe']['totalTime'],","        'total_nutrients': r['hits'][0]['recipe']['totalNutrients'],","        'likes': {","        }","    }","","pprint(recipe)","","i = input(\"Y/N: \")  # If data is ok then populate theour DB","if i == \"Y\":","    coll = mongo.db.recipe","    coll.insert_one(recipe)"]}],[{"start":{"row":6,"column":0},"end":{"row":11,"column":0},"action":"remove","lines":["\"\"\" ENVIROMENT VARIABLES \"\"\"","MONGODB_URI = os.getenv(\"MONGO_URI\")","DBS_NAME = \"cookbook\"","COLLECTION_NAME = \"recipe\"","",""],"id":2}],[{"start":{"row":6,"column":0},"end":{"row":17,"column":61},"action":"remove","lines":["","def mongo_connect(url):","    \"\"\"Function to make a connection to our DB\"\"\"","    try:","        conn = pymongo.MongoClient(url)","        print('Mongo is connected')","        return conn","    except pymongo.errors.ConnectionFailure as e:","        print('Could not connect to MongoDB: %s') % e","","conn = mongo_connect(MONGODB_URI)  # Assign our connection to a var","coll = conn[DBS_NAME][COLLECTION_NAME]  # Put it all together"],"id":3}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":6,"column":0},"end":{"row":6,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1564678187734,"hash":"ee336d01612d8b5bfe89cc801683c2c3c005667b"}